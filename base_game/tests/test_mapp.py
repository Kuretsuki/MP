import pytest
from map_tracking import mapp

@pytest.mark.parametrize("filename, content, expected", [
# If the text file is empty
    ("m0.txt", "", []),

# If the map is a simple 3x3 grid
    ("m1.txt", "...\n.L.\n...", ["...", ".L.", "..."]),

# Test for the actual map used as default

    ("m2.txt",
     "TTTTTTTTT\n"
     "T...+..+T\n"
     "T+..~...T\n"
     "T...R.T.T\n"
     "T.T.LTT.T\n"
     "T.x...*.T\n"
     "T.......T\n"
     "T.......T\n"
     "TTTTTTTTT",
     [
         "TTTTTTTTT",
         "T...+..+T",
         "T+..~...T",
         "T...R.T.T",
         "T.T.LTT.T",
         "T.x...*.T",
         "T.......T",
         "T.......T",
         "TTTTTTTTT"
     ]),

# Tests for other possibilities

    ("m3.txt",
     "T.T.\n"
     "..+.\n"
     ".R..\n",
     ["T.T.", "..+.", ".R.."]),

    ("m4.txt",
     "T~_.\n"
     ".._T\n"
     "x..T\n",
     ["T~_.", ".._T", "x..T"]),

    ("m5.txt",
     "x+*.\n"
     "....\n"
     ".L.R\n",
     ["x+*.", "....", ".L.R"]),

    ("m6.txt",
     "TTTTT\n"
     "T...T\n"
     "T.L.T\n"
     "T...T\n"
     "TTTTT",
     ["TTTTT", "T...T", "T.L.T", "T...T", "TTTTT"]),

    ("m7.txt",
     "T...+...~...R...*...L...x...T",
     ["T...+...~...R...*...L...x...T"]),

    ("m8.txt",
     "T\nT\nL\n+\n~\nR\n*\nx\nT",
     ["T", "T", "L", "+", "~", "R", "*", "x", "T"]),

    ("m9.txt",
     "TTTTTTTTTTTTTTT\n"
     "T....+.....R..T\n"
     "T.TTT.~TTT....T\n"
     "T..R..__..+...T\n"
     "T...TTTTT.....T\n"
     "T.x..*....R...T\n"
     "TTT..~~~..TTT.T\n"
     "T..L.....+....T\n"
     "T....R..___...T\n"
     "T..TTT...R....T\n"
     "T....+....TT..T\n"
     "T..~~~....x...T\n"
     "T....R....*...T\n"
     "T.....+.......T\n"
     "TTTTTTTTTTTTTTT",
     [
         "TTTTTTTTTTTTTTT",
         "T....+.....R..T",
         "T.TTT.~TTT....T",
         "T..R..__..+...T",
         "T...TTTTT.....T",
         "T.x..*....R...T",
         "TTT..~~~..TTT.T",
         "T..L.....+....T",
         "T....R..___...T",
         "T..TTT...R....T",
         "T....+....TT..T",
         "T..~~~....x...T",
         "T....R....*...T",
         "T.....+.......T",
         "TTTTTTTTTTTTTTT"
     ]),
    
    ("m10.txt",
     "TTTTTTTTTTTTTTTTTTTTTTTTTTTTTT\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "T............................T\n"
     "TTTTTTTTTTTTTTTTTTTTTTTTTTTTTT",
     [
         "TTTTTTTTTTTTTTTTTTTTTTTTTTTTTT",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "T............................T",
         "TTTTTTTTTTTTTTTTTTTTTTTTTTTTTT"
     ]),

])

def test_mapp(filename, tmp_path, content, expected):
    file_path = tmp_path / filename
    file_path.write_text(content)
    assert mapp(file_path) == expected
